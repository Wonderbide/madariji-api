# ===================================================================
# COMMON CONFIGURATION (shared across all profiles)
# No secrets, no environment-specific values
# ===================================================================

# ===================================================================
# DATASOURCE CONFIGURATION
# ===================================================================
spring.datasource.url=${DB_URL}
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# ===================================================================
# JPA & HIBERNATE CONFIGURATION
# ===================================================================
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false

# ===================================================================
# LIQUIBASE DATABASE MIGRATION
# ===================================================================
spring.liquibase.enabled=true

# ===================================================================
# FILE UPLOAD CONFIGURATION
# ===================================================================
spring.servlet.multipart.max-file-size=50MB

# ===================================================================
# SERVER TIMEOUTS
# ===================================================================
server.servlet.session.timeout=600s
spring.mvc.async.request-timeout=600000
server.tomcat.connection-timeout=600000
server.tomcat.keepAliveTimeout=600000

# ===================================================================
# SPRING HTTP CLIENT CONFIGURATION
# ===================================================================
spring.http.client.provider=simple

# ===================================================================
# ACTUATOR CONFIGURATION (Health checks)
# ===================================================================
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=always
management.health.db.enabled=true

# ===================================================================
# GCP CONFIGURATION (disabled - using R2 instead)
# ===================================================================
spring.cloud.gcp.project-id=${GCP_PROJECT_ID:disabled}
spring.cloud.gcp.credentials.location=${GCP_CREDENTIALS_PATH:}
spring.cloud.gcp.pubsub.enabled=false

# Disable old polling systems (using webhooks)
batch.check.interval=999999999
batch.vision.polling-delay=999999999
batch.result.check.enabled=false
batch.polling.enabled=false
batch.polling.interval=999999999

# ===================================================================
# BATCH MODULE CLOUD STORAGE CONFIGURATION (R2)
# ===================================================================
batch.storage.provider=r2
batch.storage.paths.vision-results=batch/vision-results/
batch.storage.paths.requests=batch/requests/
batch.storage.paths.results=batch/results/
batch.storage.paths.structured=batch/structured/

# ===================================================================
# GCS CONFIGURATION (legacy - not actively used, R2 is primary)
# ===================================================================
gcp.gcs.bucket.input-pdfs=${GCS_BUCKET_NAME:disabled}

# ===================================================================
# EXTERNAL API KEYS (all from environment)
# ===================================================================
gemini.api.key=${GEMINI_API_KEY}

# ===================================================================
# SPRING SECURITY OAUTH2 RESOURCE SERVER (JWT)
# ===================================================================
auth.provider=supabase
spring.security.oauth2.resourceserver.jwt.issuer-uri=${SUPABASE_URL}/auth/v1
spring.security.oauth2.resourceserver.jwt.audiences=authenticated

# Supabase Configuration
supabase.url=${SUPABASE_URL}
supabase.anon.key=${SUPABASE_ANON_KEY}
supabase.jwt.secret=${SUPABASE_JWT_SECRET}

# ===================================================================
# STRIPE PAYMENT CONFIGURATION
# ===================================================================
stripe.secret-key=${STRIPE_SECRET_KEY:}
stripe.publishable-key=${STRIPE_PUBLISHABLE_KEY:}
stripe.webhook-secret=${STRIPE_WEBHOOK_SECRET:}

# Pricing tiers
stripe.price.standard.monthly=${STRIPE_PRICE_STANDARD_MONTHLY:}
stripe.price.pro.monthly=${STRIPE_PRICE_PRO_MONTHLY:}

# Frontend URL for Stripe redirects
app.frontend-url=${FRONTEND_URL:http://localhost:5173}

# ===================================================================
# GEMINI ENRICHMENT CONFIGURATION
# ===================================================================
enrichment.sync.api-key=${GEMINI_API_KEY}
enrichment.sync.model=gemini-2.5-pro
enrichment.sync.base-url=https://generativelanguage.googleapis.com/v1beta/models/
enrichment.sync.max-pdf-size-mb=50
enrichment.sync.timeout-seconds=300
enrichment.sync.temperature=0.2
enrichment.sync.max-output-tokens=65536
enrichment.sync.max-retries=3
enrichment.sync.retry-delay-ms=1000
enrichment.sync.chunk-size=50

# ===================================================================
# ENRICHMENT RECOVERY CONFIGURATION
# ===================================================================
enrichment.recovery.interval-ms=1800000

# ===================================================================
# TEXT-TO-SPEECH (TTS) CONFIGURATION
# ===================================================================
tts.voice.language=ar-XA
tts.voice.name=ar-XA-Wavenet-B
tts.audio.encoding=MP3

# ===================================================================
# TRANSLATION LANGUAGES CONFIGURATION
# ===================================================================
translation.languages.default-language=fr
translation.languages.strict-validation=false

translation.languages.supported.fr.name=FRANCAISE
translation.languages.supported.fr.display-name=francais
translation.languages.supported.fr.locale=fr-FR

translation.languages.supported.en.name=ANGLAISE
translation.languages.supported.en.display-name=anglais
translation.languages.supported.en.locale=en-US

translation.languages.supported.ar.name=ARABE
translation.languages.supported.ar.display-name=arabe
translation.languages.supported.ar.locale=ar-SA

translation.languages.supported.es.name=ESPAGNOLE
translation.languages.supported.es.display-name=espagnol
translation.languages.supported.es.locale=es-ES

translation.languages.supported.de.name=ALLEMANDE
translation.languages.supported.de.display-name=allemand
translation.languages.supported.de.locale=de-DE

translation.languages.supported.it.name=ITALIENNE
translation.languages.supported.it.display-name=italien
translation.languages.supported.it.locale=it-IT

translation.languages.supported.pt.name=PORTUGAISE
translation.languages.supported.pt.display-name=portugais
translation.languages.supported.pt.locale=pt-BR

translation.languages.supported.ru.name=RUSSE
translation.languages.supported.ru.display-name=russe
translation.languages.supported.ru.locale=ru-RU

translation.languages.supported.zh.name=CHINOISE
translation.languages.supported.zh.display-name=chinois
translation.languages.supported.zh.locale=zh-CN

translation.languages.supported.ja.name=JAPONAISE
translation.languages.supported.ja.display-name=japonais
translation.languages.supported.ja.locale=ja-JP

# ===================================================================
# CORS CONFIGURATION
# ===================================================================
cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:5173,https://localhost:5173}

# ===================================================================
# LOGGING (base level, overridden per profile)
# ===================================================================
logging.level.root=INFO
logging.level.com.backcover=INFO
